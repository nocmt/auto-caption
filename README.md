<div align="center" >
    <img src="./build/icon.png" width="100px" height="100px"/>
    <h1 align="center">auto-caption</h1>
    <p>Auto Caption æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å®æ—¶å­—å¹•æ˜¾ç¤ºè½¯ä»¶ã€‚</p>
    <p>
      <a href="https://github.com/HiMeditator/auto-caption/releases"><img src="https://img.shields.io/badge/release-1.1.0-blue"></a>
      <a href="https://github.com/HiMeditator/auto-caption/issues"><img src="https://img.shields.io/github/issues/HiMeditator/auto-caption?color=orange"></a>
      <img src="https://img.shields.io/github/languages/top/HiMeditator/auto-caption?color=royalblue">
      <img src="https://img.shields.io/github/repo-size/HiMeditator/auto-caption?color=green">
      <img src="https://img.shields.io/github/stars/HiMeditator/auto-caption?style=social">
    </p>
    <p>
        | <b>ç®€ä½“ä¸­æ–‡</b>
        | <a href="./README_en.md">English</a>
        | <a href="./README_ja.md">æ—¥æœ¬èª</a> |
    </p>
    <p><i>v1.1.0 ç‰ˆæœ¬å·²ç»å‘å¸ƒï¼Œæ–°å¢ GLM-ASR äº‘ç«¯å­—å¹•æ¨¡å‹å’Œ OpenAI å…¼å®¹æ¨¡å‹ç¿»è¯‘...</i></p>
</div>

![](./assets/media/main_zh.png)

## ğŸ“¥ ä¸‹è½½

è½¯ä»¶ä¸‹è½½ï¼š[GitHub Releases](https://github.com/HiMeditator/auto-caption/releases)

Vosk æ¨¡å‹ä¸‹è½½ï¼š[Vosk Models](https://alphacephei.com/vosk/models)

SOSV æ¨¡å‹ä¸‹è½½ï¼š[ Shepra-ONNX SenseVoice Model](https://github.com/HiMeditator/auto-caption/releases/tag/sosv-model)

## ğŸ“š ç›¸å…³æ–‡æ¡£

[Auto Caption ç”¨æˆ·æ‰‹å†Œ](./docs/user-manual/zh.md)

[å­—å¹•å¼•æ“è¯´æ˜æ–‡æ¡£](./docs/engine-manual/zh.md)

[æ›´æ–°æ—¥å¿—](./docs/CHANGELOG.md)

## âœ¨ ç‰¹æ€§

- ç”ŸæˆéŸ³é¢‘è¾“å‡ºæˆ–éº¦å…‹é£è¾“å…¥çš„å­—å¹•
- æ”¯æŒè°ƒç”¨æœ¬åœ° Ollama æ¨¡å‹ã€äº‘ç«¯ OpenAI å…¼å®¹æ¨¡å‹ã€æˆ–äº‘ç«¯ Google ç¿»è¯‘ API è¿›è¡Œç¿»è¯‘
- è·¨å¹³å°ï¼ˆWindowsã€macOSã€Linuxï¼‰ã€å¤šç•Œé¢è¯­è¨€ï¼ˆä¸­æ–‡ã€è‹±è¯­ã€æ—¥è¯­ï¼‰æ”¯æŒ
- ä¸°å¯Œçš„å­—å¹•æ ·å¼è®¾ç½®ï¼ˆå­—ä½“ã€å­—ä½“å¤§å°ã€å­—ä½“ç²—ç»†ã€å­—ä½“é¢œè‰²ã€èƒŒæ™¯é¢œè‰²ç­‰ï¼‰
- çµæ´»çš„å­—å¹•å¼•æ“é€‰æ‹©ï¼ˆé˜¿é‡Œäº‘ Gummy äº‘ç«¯æ¨¡å‹ã€GLM-ASR äº‘ç«¯æ¨¡å‹ã€æœ¬åœ° Vosk æ¨¡å‹ã€æœ¬åœ° SOSV æ¨¡å‹ã€è¿˜å¯ä»¥è‡ªå·±å¼€å‘æ¨¡å‹ï¼‰
- å¤šè¯­è¨€è¯†åˆ«ä¸ç¿»è¯‘ï¼ˆè§ä¸‹æ–‡â€œâš™ï¸ è‡ªå¸¦å­—å¹•å¼•æ“è¯´æ˜â€ï¼‰
- å­—å¹•è®°å½•å±•ç¤ºä¸å¯¼å‡ºï¼ˆæ”¯æŒå¯¼å‡º `.srt` å’Œ `.json` æ ¼å¼ï¼‰

## ğŸ“– åŸºæœ¬ä½¿ç”¨

> âš ï¸ æ³¨æ„ï¼šç›®å‰åªç»´æŠ¤äº† Windows å¹³å°çš„è½¯ä»¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…¶ä»–å¹³å°çš„æœ€åç‰ˆæœ¬åœç•™åœ¨ v1.0.0ã€‚

è½¯ä»¶å·²ç»é€‚é…äº† Windowsã€macOS å’Œ Linux å¹³å°ã€‚æµ‹è¯•è¿‡çš„ä¸»æµå¹³å°ä¿¡æ¯å¦‚ä¸‹ï¼š

| æ“ä½œç³»ç»Ÿç‰ˆæœ¬        | å¤„ç†å™¨æ¶æ„ | è·å–ç³»ç»ŸéŸ³é¢‘è¾“å…¥ | è·å–ç³»ç»ŸéŸ³é¢‘è¾“å‡º |
| ------------------ | ---------- | ---------------- | ---------------- |
| Windows 11 24H2    | x64        | âœ…               | âœ…                |
| macOS Sequoia 15.5 | arm64      | âœ… [éœ€è¦é¢å¤–é…ç½®](./docs/user-manual/zh.md#macos-è·å–ç³»ç»ŸéŸ³é¢‘è¾“å‡º)     | âœ…                |
| Ubuntu 24.04.2     | x64        | âœ…               | âœ…                |

macOS å¹³å°å’Œ Linux å¹³å°è·å–ç³»ç»ŸéŸ³é¢‘è¾“å‡ºéœ€è¦è¿›è¡Œé¢å¤–è®¾ç½®ï¼Œè¯¦è§ [Auto Caption ç”¨æˆ·æ‰‹å†Œ](./docs/user-manual/zh.md)ã€‚

ä¸‹è½½è½¯ä»¶åï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©å¯¹åº”çš„æ¨¡å‹ï¼Œç„¶åé…ç½®æ¨¡å‹ã€‚

|                                                              | å‡†ç¡®ç‡ | å®æ—¶æ€§ | éƒ¨ç½²ç±»å‹          | æ”¯æŒè¯­è¨€   | ç¿»è¯‘       | å¤‡æ³¨                                                       |
| ------------------------------------------------------------ | -------- | ------------- | ---------- | ---------- | ---------------------------------------------------------- | ---------------------------------------------------------- |
| [Gummy](https://help.aliyun.com/zh/model-studio/gummy-speech-recognition-translation) | å¾ˆå¥½ğŸ˜Š    | å¾ˆå¥½ğŸ˜Š | äº‘ç«¯ / é˜¿é‡Œäº‘ | 10 ç§      | è‡ªå¸¦ç¿»è¯‘   | æ”¶è´¹ï¼Œ0.54CNY / å°æ—¶                                       |
| [glm-asr-2512](https://docs.bigmodel.cn/cn/guide/models/sound-and-video/glm-asr-2512) | å¾ˆå¥½ğŸ˜Š | è¾ƒå·®ğŸ˜ | äº‘ç«¯ / æ™ºè°± AI | ä¸­ã€ç²¤ã€è‹±ã€æ—¥ã€æ³•ã€å¾·ã€éŸ©ã€è¥¿ç­ç‰™è¯­ï¼Œä¸æ”¯æŒä¼ å‚æŒ‡å®š | éœ€é¢å¤–é…ç½® | æ”¶è´¹ï¼Œçº¦ 0.72CNY / å°æ—¶ |
| [FunAudioLLM/SenseVoiceSmall](https://github.com/FunAudioLLM/SenseVoice/blob/main/README_zh.md) | å¾ˆå¥½ğŸ˜Š | å¾ˆå¥½ğŸ˜Š | äº‘ç«¯ / ç¡…åŸºæµåŠ¨ | ä¸­ã€ç²¤ã€è‹±ã€æ—¥ã€éŸ©è¯­ï¼Œä¸æ”¯æŒä¼ å‚æŒ‡å®š | éœ€é¢å¤–é…ç½®ï¼Œä½¿ç”¨å’Œæ™ºè°± AIä¸€æ ·çš„è°ƒç”¨æ–¹å¼ï¼Œä¿®æ”¹URLä¸ºï¼šhttps://api.siliconflow.cn/v1/audio/transcriptionsï¼Œæ¨¡å‹åç§°ä¿®æ”¹ä¸ºï¼šFunAudioLLM/SenseVoiceSmall | å…è´¹ |
| [Vosk](https://alphacephei.com/vosk)                         | è¾ƒå·®ğŸ˜    | å¾ˆå¥½ğŸ˜Š | æœ¬åœ° / CPU    | è¶…è¿‡ 30 ç§ | éœ€é¢å¤–é…ç½® | æ”¯æŒçš„è¯­è¨€éå¸¸å¤š                                           |
| [SOSV](https://k2-fsa.github.io/sherpa/onnx/sense-voice/index.html) | ä¸€èˆ¬ğŸ˜    | ä¸€èˆ¬ğŸ˜ | æœ¬åœ° / CPU    | 5 ç§       | éœ€é¢å¤–é…ç½® | ä»…æœ‰ä¸€ä¸ªæ¨¡å‹                                               |
| è‡ªå·±å¼€å‘                                                     | ğŸ¤”        | ğŸ¤”      | è‡ªå®šä¹‰        | è‡ªå®šä¹‰     | è‡ªå®šä¹‰     | æ ¹æ®[æ–‡æ¡£](./docs/engine-manual/zh.md)ä½¿ç”¨ Python è‡ªå·±å¼€å‘ |

å¦‚æœä½ é€‰æ‹©çš„ä¸æ˜¯ Gummy æ¨¡å‹ï¼Œä½ è¿˜éœ€è¦é…ç½®è‡ªå·±çš„ç¿»è¯‘æ¨¡å‹ã€‚

### é…ç½®ç¿»è¯‘æ¨¡å‹

![](./assets/media/engine_zh.png)

> æ³¨æ„ï¼šç¿»è¯‘ä¸æ˜¯å®æ—¶çš„ï¼Œç¿»è¯‘æ¨¡å‹åªä¼šåœ¨æ¯å¥è¯è¯†åˆ«å®Œæˆåå†è°ƒç”¨ã€‚

#### Ollama æœ¬åœ°æ¨¡å‹

> æ³¨æ„ï¼šä½¿ç”¨å‚æ•°é‡è¿‡å¤§çš„æ¨¡å‹ä¼šå¯¼è‡´èµ„æºæ¶ˆè€—å’Œç¿»è¯‘å»¶è¿Ÿè¾ƒå¤§ã€‚å»ºè®®ä½¿ç”¨å‚æ•°é‡å°äº 1B çš„æ¨¡å‹ï¼Œæ¯”å¦‚ï¼š `qwen2.5:0.5b`, `qwen3:0.6b`ã€‚

ä½¿ç”¨è¯¥æ¨¡å‹ä¹‹å‰ä½ éœ€è¦ç¡®å®šæœ¬æœºå®‰è£…äº† [Ollama](https://ollama.com/) è½¯ä»¶ï¼Œå¹¶å·²ç»ä¸‹è½½äº†éœ€è¦çš„å¤§è¯­è¨€æ¨¡å‹ã€‚åªéœ€è¦å°†éœ€è¦è°ƒç”¨çš„å¤§æ¨¡å‹åç§°æ·»åŠ åˆ°è®¾ç½®ä¸­çš„ `æ¨¡å‹åç§°` å­—æ®µä¸­ï¼Œå¹¶ä¿è¯ `Base URL` å­—æ®µä¸ºç©ºã€‚

#### OpenAI å…¼å®¹æ¨¡å‹

å¦‚æœè§‰å¾—æœ¬åœ° Ollama æ¨¡å‹çš„ç¿»è¯‘æ•ˆæœä¸ä½³ï¼Œæˆ–è€…ä¸æƒ³åœ¨æœ¬åœ°å®‰è£… Ollama æ¨¡å‹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨äº‘ç«¯çš„ OpenAI å…¼å®¹æ¨¡å‹ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›æ¨¡å‹æä¾›å•†çš„ `Base URL`ï¼š
- OpenAI: https://api.openai.com/v1
- DeepSeekï¼šhttps://api.deepseek.com
- é˜¿é‡Œäº‘ï¼šhttps://dashscope.aliyuncs.com/compatible-mode/v1
- ç¡…åŸºæµåŠ¨ï¼šhttps://api.siliconflow.cnï¼ˆæ¨¡å‹åç§°ç”¨ï¼štencent/Hunyuan-MT-7Bï¼Œå…è´¹ï¼‰

API Key éœ€è¦åœ¨å¯¹åº”çš„æ¨¡å‹æä¾›å•†å¤„è·å–ã€‚

#### Google ç¿»è¯‘ API

> æ³¨æ„ï¼šGoogle ç¿»è¯‘ API åœ¨æ— æ³•è®¿é—®å›½é™…ç½‘ç»œçš„åœ°åŒºæ— æ³•ä½¿ç”¨ã€‚

æ— éœ€ä»»ä½•é…ç½®ï¼Œè”ç½‘å³å¯ä½¿ç”¨ã€‚

### ä½¿ç”¨ Gummy æ¨¡å‹

> å›½é™…ç‰ˆçš„é˜¿é‡Œäº‘æœåŠ¡ä¼¼ä¹å¹¶æ²¡æœ‰æä¾› Gummy æ¨¡å‹ï¼Œå› æ­¤ç›®å‰éä¸­å›½ç”¨æˆ·å¯èƒ½æ— æ³•ä½¿ç”¨ Gummy å­—å¹•å¼•æ“ã€‚

å¦‚æœè¦ä½¿ç”¨é»˜è®¤çš„ Gummy å­—å¹•å¼•æ“ï¼ˆä½¿ç”¨äº‘ç«¯æ¨¡å‹è¿›è¡Œè¯­éŸ³è¯†åˆ«å’Œç¿»è¯‘ï¼‰ï¼Œé¦–å…ˆéœ€è¦è·å–é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°çš„ API KEYï¼Œç„¶åå°† API KEY æ·»åŠ åˆ°è½¯ä»¶è®¾ç½®ä¸­ï¼ˆåœ¨å­—å¹•å¼•æ“è®¾ç½®çš„æ›´å¤šè®¾ç½®ä¸­ï¼‰æˆ–è€…é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼ˆä»… Windows å¹³å°æ”¯æŒè¯»å–ç¯å¢ƒå˜é‡ä¸­çš„ API KEYï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸ä½¿ç”¨è¯¥æ¨¡å‹ã€‚ç›¸å…³æ•™ç¨‹ï¼š

- [è·å– API KEY](https://help.aliyun.com/zh/model-studio/get-api-key)
- [å°† API Key é…ç½®åˆ°ç¯å¢ƒå˜é‡](https://help.aliyun.com/zh/model-studio/configure-api-key-through-environment-variables)

### ä½¿ç”¨ GLM-ASR æ¨¡å‹

ä½¿ç”¨å‰éœ€è¦è·å–æ™ºè°± AI å¹³å°çš„ API KEYï¼Œå¹¶æ·»åŠ åˆ°è½¯ä»¶è®¾ç½®ä¸­ã€‚

API KEY è·å–ç›¸å…³é“¾æ¥ï¼š[å¿«é€Ÿå¼€å§‹](https://docs.bigmodel.cn/cn/guide/start/quick-start)ã€‚

### ä½¿ç”¨ Vosk æ¨¡å‹

> Vosk æ¨¡å‹çš„è¯†åˆ«æ•ˆæœè¾ƒå·®ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚

å¦‚æœè¦ä½¿ç”¨ Vosk æœ¬åœ°å­—å¹•å¼•æ“ï¼Œé¦–å…ˆéœ€è¦åœ¨ [Vosk Models](https://alphacephei.com/vosk/models) é¡µé¢ä¸‹è½½ä½ éœ€è¦çš„æ¨¡å‹ï¼Œå¹¶å°†æ¨¡å‹è§£å‹åˆ°æœ¬åœ°ï¼Œå¹¶å°†æ¨¡å‹æ–‡ä»¶å¤¹çš„è·¯å¾„æ·»åŠ åˆ°è½¯ä»¶çš„è®¾ç½®ä¸­ã€‚

![](./assets/media/config_zh.png)

### ä½¿ç”¨ SOSV æ¨¡å‹

ä½¿ç”¨ SOSV æ¨¡å‹çš„æ–¹å¼å’Œ Vosk ä¸€æ ·ï¼Œä¸‹è½½åœ°å€å¦‚ä¸‹ï¼šhttps://github.com/HiMeditator/auto-caption/releases/tag/sosv-model

## âŒ¨ï¸ åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨

è½¯ä»¶é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯ç”¨åˆ†ä¸ºè½¯ä»¶ä¸»ä½“å’Œå­—å¹•å¼•æ“ä¸¤éƒ¨åˆ†ï¼Œè½¯ä»¶ä¸»ä½“é€šè¿‡å›¾å½¢ç•Œé¢è°ƒç”¨å­—å¹•å¼•æ“ã€‚æ ¸å¿ƒçš„éŸ³é¢‘è·å–å’ŒéŸ³é¢‘è¯†åˆ«åŠŸèƒ½éƒ½åœ¨å­—å¹•å¼•æ“ä¸­å®ç°ï¼Œè€Œå­—å¹•å¼•æ“æ˜¯å¯ç”¨è„±ç¦»è½¯ä»¶ä¸»ä½“å•ç‹¬ä½¿ç”¨çš„ã€‚

å­—å¹•å¼•æ“ä½¿ç”¨ Python å¼€å‘ï¼Œé€šè¿‡ PyInstaller æ‰“åŒ…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚å› æ­¤å­—å¹•å¼•æ“æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š

1. ä½¿ç”¨é¡¹ç›®å­—å¹•å¼•æ“éƒ¨åˆ†çš„æºä»£ç ï¼Œä½¿ç”¨å®‰è£…äº†å¯¹åº”åº“çš„ Python ç¯å¢ƒè¿›è¡Œè¿è¡Œ
2. ä½¿ç”¨æ‰“åŒ…å¥½çš„å­—å¹•å¼•æ“çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡ç»ˆç«¯è¿è¡Œ

è¿è¡Œå‚æ•°å’Œè¯¦ç»†ä½¿ç”¨ä»‹ç»è¯·å‚è€ƒ[ç”¨æˆ·æ‰‹å†Œ](./docs/user-manual/zh.md#å•ç‹¬ä½¿ç”¨å­—å¹•å¼•æ“)ã€‚

```bash
python main.py \
-e gummy \
-k sk-******************************** \
-a 0 \
-d 1 \
-s en \
-t zh
```

![](./docs/img/07.png)

## âš™ï¸ è‡ªå¸¦å­—å¹•å¼•æ“è¯´æ˜

ç›®å‰è½¯ä»¶è‡ªå¸¦ 4 ä¸ªå­—å¹•å¼•æ“ã€‚å®ƒä»¬çš„è¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ã€‚

### Gummy å­—å¹•å¼•æ“ï¼ˆäº‘ç«¯ï¼‰

åŸºäºé€šä¹‰å®éªŒå®¤[Gummyè¯­éŸ³ç¿»è¯‘å¤§æ¨¡å‹](https://help.aliyun.com/zh/model-studio/gummy-speech-recognition-translation/)è¿›è¡Œå¼€å‘ï¼ŒåŸºäº[é˜¿é‡Œäº‘ç™¾ç‚¼](https://bailian.console.aliyun.com)çš„ API è¿›è¡Œè°ƒç”¨è¯¥äº‘ç«¯æ¨¡å‹ã€‚

**æ¨¡å‹è¯¦ç»†å‚æ•°ï¼š**

- éŸ³é¢‘é‡‡æ ·ç‡æ”¯æŒï¼š16kHzåŠä»¥ä¸Š
- éŸ³é¢‘é‡‡æ ·ä½æ•°ï¼š16bit
- éŸ³é¢‘é€šé“æ•°æ”¯æŒï¼šå•é€šé“
- å¯è¯†åˆ«è¯­è¨€ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ—¥è¯­ã€éŸ©è¯­ã€å¾·è¯­ã€æ³•è¯­ã€ä¿„è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­
- æ”¯æŒçš„ç¿»è¯‘ï¼š
  - ä¸­æ–‡ â†’ è‹±æ–‡ã€æ—¥è¯­ã€éŸ©è¯­
  - è‹±æ–‡ â†’ ä¸­æ–‡ã€æ—¥è¯­ã€éŸ©è¯­
  - æ—¥è¯­ã€éŸ©è¯­ã€å¾·è¯­ã€æ³•è¯­ã€ä¿„è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­ â†’ ä¸­æ–‡æˆ–è‹±æ–‡

**ç½‘ç»œæµé‡æ¶ˆè€—ï¼š**

å­—å¹•å¼•æ“ä½¿ç”¨åŸç”Ÿé‡‡æ ·ç‡ï¼ˆå‡è®¾ä¸º 48kHzï¼‰è¿›è¡Œé‡‡æ ·ï¼Œæ ·æœ¬ä½æ·±ä¸º 16bitï¼Œä¸Šä¼ éŸ³é¢‘ä¸ºä¸ºå•é€šé“ï¼Œå› æ­¤ä¸Šä¼ é€Ÿç‡çº¦ä¸ºï¼š

$$
48000\ \text{samples/second} \times 2\ \text{bytes/sample} \times 1\ \text{channel}  = 93.75\ \text{KB/s}
$$

è€Œä¸”å¼•æ“åªä¼šè·å–åˆ°éŸ³é¢‘æµçš„æ—¶å€™æ‰ä¼šä¸Šä¼ æ•°æ®ï¼Œå› æ­¤å®é™…ä¸Šä¼ é€Ÿç‡å¯èƒ½æ›´å°ã€‚æ¨¡å‹ç»“æœå›ä¼ æµé‡æ¶ˆè€—è¾ƒå°ï¼Œæ²¡æœ‰çº³å…¥è€ƒè™‘ã€‚

### GLM-ASR å­—å¹•å¼•æ“ï¼ˆäº‘ç«¯ï¼‰

https://docs.bigmodel.cn/cn/guide/models/sound-and-video/glm-asr-2512

### Vosk å­—å¹•å¼•æ“ï¼ˆæœ¬åœ°ï¼‰

åŸºäº [vosk-api](https://github.com/alphacep/vosk-api) å¼€å‘ã€‚è¯¥å­—å¹•å¼•æ“çš„ä¼˜ç‚¹æ˜¯å¯é€‰çš„è¯­è¨€æ¨¡å‹éå¸¸å¤šï¼ˆè¶…è¿‡ 30 ç§ï¼‰ï¼Œç¼ºç‚¹æ˜¯è¯†åˆ«æ•ˆæœæ¯”è¾ƒå·®ï¼Œä¸”ç”Ÿæˆå†…å®¹æ²¡æœ‰æ ‡ç‚¹ç¬¦å·ã€‚


### SOSV å­—å¹•å¼•æ“ï¼ˆæœ¬åœ°ï¼‰

[SOSV](https://github.com/HiMeditator/auto-caption/releases/tag/sosv-model) æ˜¯ä¸€ä¸ªæ•´åˆåŒ…ï¼Œè¯¥æ•´åˆåŒ…ä¸»è¦åŸºäº [Shepra-ONNX SenseVoice](https://k2-fsa.github.io/sherpa/onnx/sense-voice/index.html)ï¼Œå¹¶æ·»åŠ äº†ç«¯ç‚¹æ£€æµ‹æ¨¡å‹å’Œæ ‡ç‚¹æ¢å¤æ¨¡å‹ã€‚è¯¥æ¨¡å‹æ”¯æŒè¯†åˆ«çš„è¯­è¨€æœ‰ï¼šè‹±è¯­ã€ä¸­æ–‡ã€æ—¥è¯­ã€éŸ©è¯­ã€ç²¤è¯­ã€‚

## ğŸš€ é¡¹ç›®è¿è¡Œ

![](./assets/media/structure_zh.png)

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æ„å»ºå­—å¹•å¼•æ“

#### ä¸€é”®æ„å»º

```bash
npm run build:engine
```

æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ç¯å¢ƒã€‚

#### æ‰‹åŠ¨æ„å»º


é¦–å…ˆè¿›å…¥ `engine` æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆéœ€è¦ä½¿ç”¨å¤§äºç­‰äº Python 3.10 çš„ Python è¿è¡Œç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨ Python 3.12ï¼‰ï¼š

```bash
cd ./engine
# in ./engine folder
python -m venv .venv
# or
python3 -m venv .venv
```

ç„¶åæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š

```bash
# Windows
.venv/Scripts/activate
# Linux or macOS
source .venv/bin/activate
```

ç„¶åå®‰è£…ä¾èµ–ï¼ˆè¿™ä¸€æ­¥åœ¨ macOS å’Œ Linux å¯èƒ½ä¼šæŠ¥é”™ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºæ„å»ºå¤±è´¥ï¼Œéœ€è¦æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼‰ï¼š

> **macOS ç”¨æˆ·æ³¨æ„**ï¼š
> 1. å®‰è£…ä¾èµ–å‰éœ€è¦å…ˆå®‰è£… `portaudio` åº“ï¼Œå¦åˆ™ `pyaudio` ä¼šæ„å»ºå¤±è´¥ã€‚
>    è¯·ä½¿ç”¨ Homebrew å®‰è£…ï¼š
>    ```bash
>    brew install portaudio
>    ```
> 2. å¦‚æœé‡åˆ° `llvmlite` ç›¸å…³é”™è¯¯ï¼Œè¯·ç¡®ä¿ä½¿ç”¨ Python 3.10 - 3.12 ç‰ˆæœ¬ã€‚Python 3.13 å¯èƒ½å› ä¸ºç¼ºå°‘é¢„ç¼–è¯‘çš„ wheel åŒ…å¯¼è‡´æ„å»ºå¤±è´¥ã€‚

```bash
pip install -r requirements.txt
```

ç„¶åä½¿ç”¨ `pyinstaller` æ„å»ºé¡¹ç›®ï¼š

```bash
pyinstaller ./main.spec
```

æ³¨æ„ `main.spec` æ–‡ä»¶ä¸­ `vosk` åº“çš„è·¯å¾„å¯èƒ½ä¸æ­£ç¡®ï¼Œéœ€è¦æ ¹æ®å®é™…çŠ¶å†µé…ç½®ï¼ˆä¸ Python ç¯å¢ƒçš„ç‰ˆæœ¬ç›¸å…³ï¼‰ã€‚

```
# Windows
vosk_path = str(Path('./.venv/Lib/site-packages/vosk').resolve())
# Linux or macOS
vosk_path = str(Path('./.venv/lib/python3.x/site-packages/vosk').resolve())
```

æ­¤æ—¶é¡¹ç›®æ„å»ºå®Œæˆï¼Œè¿›å…¥ `engine/dist` æ–‡ä»¶å¤¹å¯è§å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚å³å¯è¿›è¡Œåç»­æ“ä½œã€‚

### è¿è¡Œé¡¹ç›®

```bash
npm run dev
```

### æ„å»ºé¡¹ç›®

```bash
# For windows
npm run build:win
# For macOS
npm run build:mac
# For Linux
npm run build:linux
```
